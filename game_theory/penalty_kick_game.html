



<!DOCTYPE html>
<html lang="en">
  
  <head>
    
      <meta charset="utf-8">
      <title>Bokeh Plot</title>
      
      
        
          
        
        
          
        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.2.3.min.js" integrity="sha384-T2yuo9Oe71Cz/I4X9Ac5+gpEa5a8PpJCDlqKYO0CfAuEszu1JrXLl8YugMqYe3sM" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.2.3.min.js" integrity="sha384-98GDGJ0kOMCUMUePhksaQ/GYgB3+NH9h996V88sh3aOiUNX3N+fLXAtry6xctSZ6" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.2.3.min.js" integrity="sha384-89bArO+nlbP3sgakeHjCo1JYxYR5wufVgA3IbUvDY+K7w4zyxJqssu7wVnfeKCq8" crossorigin="anonymous"></script>
        <script type="text/javascript">
            Bokeh.set_log_level("info");
        </script>
        
      
      
    
  </head>
  
  
  <body>
    
      
        
          
          
            
              <div class="bk-root" id="962c0977-fb2e-4803-a186-3876bc0de561" data-root-id="1180"></div>
            
          
        
      
      
        <script type="application/json" id="1766">
          {"fa4dfdf7-9abf-470e-b11d-ce3fbe41668d":{"roots":{"references":[{"attributes":{"args":{"b_fl":{"id":"1066"},"b_fr":{"id":"1067"},"b_shoot":{"id":"1071"},"b_start":{"id":"1064"},"bl":{"id":"1068"},"bm":{"id":"1069"},"br":{"id":"1070"},"kicker_foot":{"id":"1060"},"kicker_kick":{"id":"1061"},"txt":{"id":"1052"}},"code":"\n    b_shoot.visible = true;\n    bl.visible = false;\n    bm.visible = false;\n    br.visible = false;\n    txt.data['text'][3] = ''\n    var current = txt.data['text'][2]\n    txt.data['text'][2] = current + ' Kicking Right.'\n    kicker_kick.text= 'Right'\n    txt.change.emit()\n    b_shoot.disabled = false;\n    "},"id":"1099","type":"CustomJS"},{"attributes":{},"id":"1151","type":"StringFormatter"},{"attributes":{},"id":"1141","type":"StringFormatter"},{"attributes":{},"id":"1147","type":"StringFormatter"},{"attributes":{},"id":"1160","type":"Selection"},{"attributes":{},"id":"1154","type":"StringEditor"},{"attributes":{"columns":[{"id":"1084"},{"id":"1085"},{"id":"1086"},{"id":"1087"},{"id":"1088"},{"id":"1089"},{"id":"1090"}],"height":280,"sizing_mode":"stretch_height","source":{"id":"1083"},"view":{"id":"1092"},"visible":false,"width":400},"id":"1091","type":"DataTable"},{"attributes":{},"id":"1152","type":"StringEditor"},{"attributes":{"children":[{"id":"1073"}],"max_width":400,"sizing_mode":"stretch_width"},"id":"1121","type":"Row"},{"attributes":{"source":{"id":"1083"}},"id":"1092","type":"CDSView"},{"attributes":{},"id":"1153","type":"StringFormatter"},{"attributes":{},"id":"1142","type":"StringEditor"},{"attributes":{},"id":"1157","type":"StringFormatter"},{"attributes":{"args":{"LL_aim_slider":{"id":"1075"},"LM_aim_slider":{"id":"1076"},"LR_aim_slider":{"id":"1077"},"RL_aim_slider":{"id":"1078"},"RM_aim_slider":{"id":"1079"},"RR_aim_slider":{"id":"1080"},"automation_table":{"id":"1105"},"b_automate":{"id":"1072"},"b_fl":{"id":"1066"},"b_fr":{"id":"1067"},"b_next":{"id":"1065"},"b_start":{"id":"1064"},"iterations_slider":{"id":"1081"},"strategy_dropdown":{"id":"1082"},"txt":{"id":"1052"}},"code":"\nb_automate.visible=false;\n\nb_start.visible=false;\nb_fl.visible=false;\nb_fr.visible=false;\nb_next.visible=false;\n\nLL_aim_slider.visible=true;\nLM_aim_slider.visible=true;\nLR_aim_slider.visible=true;\nRL_aim_slider.visible=true;\nRM_aim_slider.visible=true;\nRR_aim_slider.visible=true;\n\niterations_slider.visible=true;\n\nstrategy_dropdown.visible=true;\n\nautomation_table.visible=true;\n\ntxt.data['text'][2] = ''\ntxt.data['text'][3] = 'Choose a right- or left footed kicker!'\ntxt.change.emit()  \n"},"id":"1107","type":"CustomJS"},{"attributes":{"args":{"iterations_to_run":{"id":"1062"}},"code":"\n    var iterations=parseInt(iterations_to_run.text);\n    iterations=cb_obj.value;\n    iterations_to_run.text=iterations.toString();\n"},"id":"1116","type":"CustomJS"},{"attributes":{},"id":"1156","type":"StringEditor"},{"attributes":{},"id":"1155","type":"StringFormatter"},{"attributes":{"sizing_mode":"stretch_width","text":"0,0,0","visible":false},"id":"1058","type":"Div"},{"attributes":{"args":{"ChancesColumnDataSource":{"id":"1101"},"DistributionColumnDataSource":{"id":"1083"},"automation_distribution_table":{"id":"1091"},"automation_table":{"id":"1105"},"b_auto_next":{"id":"1074"},"ball":{"id":"1040"},"goalie_body":{"id":"1033"},"goalie_head":{"id":"1032"},"iterations_to_run":{"id":"1062"},"nround":{"id":"1056"},"score":{"id":"1057"},"strategy_to_use":{"id":"1063"},"txt":{"id":"1052"}},"code":"\n\n\n\n\n// Define probability matrix\nvar p = {'Right' : {'LeftLeft' : 0.55,\n                    'LeftMiddle' : 0.65,\n                    'LeftRight' : 0.93,\n                    'MiddleLeft' : 0.74,\n                    'MiddleMiddle' : 0.60,\n                    'MiddleRight' : 0.72,\n                    'RightLeft' : 0.95,\n                    'RightMiddle' : 0.73,\n                    'RightRight' : 0.70},\n         'Left' :  {'LeftLeft' : 0.67,\n                    'LeftMiddle' : 0.70,\n                   'LeftRight' : 0.96,\n                    'MiddleLeft' : 0.74,\n                    'MiddleMiddle' : 0.60,\n                    'MiddleRight' : 0.72,\n                    'RightLeft' : 0.87,\n                    'RightMiddle' : 0.65,\n                    'RightRight' : 0.61}}\n\n//Obtain the Shot Aim chances from the column data source\n    var chances_data=ChancesColumnDataSource.data\n    var chances=chances_data['chances']\n    var LL_chance=chances[0]\n    var LM_chance=LL_chance+chances[1]\n    var LR_chance=LM_chance+chances[2]\n    var RL_chance=LR_chance+chances[3]\n    var RM_chance=RL_chance+chances[4]\n\n//Goalie Logic Decision Making Variables\n    var chance_left=1/3;\n    var chance_middle=1/3;\n    var chance_right=1/3;\n\n    var danger_goalie_left=0;\n    var danger_goalie_middle=0;\n    var danger_goalie_right=0;\n    var selected_dict=0;\n\n    var total_sample_rolls\n\n    var goalie_action=\"None\"\n\n//Loop Randomness Variable\n    var roll=0;\n\n//Goalie Fictitious Learning Variables\n    var selected_index=0;\n\n    var dist_data=DistributionColumnDataSource.data\n    var freq=dist_data['freq']\n    var decisions=dist_data['decisions']\n\n//Data Display Variables\n    var perceived_risks=dist_data['goalie_perceived_risks']\n    var scoring_chance=dist_data['striker_score_chance']\n    var scoring_roll=dist_data['striker_score_roll']\n\n//Striker Kick Choice Variables\n    var kicker_foot='none'\n    var kicker_kick='none'\n\n//Scoring Variables\n    var score_chance=0\n    var goal=1\n\n//Animation Variables\n    var animation_positions = {'Left':[37, 43], 'Middle':[47,53], 'Right':[57, 63]}\n    var bally=63\n\n\n//Handle Automated Selection\nroll=Math.random();    \n    \nif(roll&lt;=LL_chance){\n    kicker_foot='Left'\n    kicker_kick='Left'\n}\nelse if(roll&lt;=LM_chance){\n    kicker_foot='Left'\n    kicker_kick='Middle'\n}\nelse if(roll&lt;=LR_chance){\n    kicker_foot='Left'\n    kicker_kick='Right'\n}\nelse if(roll&lt;=RL_chance){\n    kicker_foot='Right'\n    kicker_kick='Left'\n}\nelse if(roll&lt;=RM_chance){\n    kicker_foot='Right'\n    kicker_kick='Middle'\n}\nelse{\n    kicker_foot='Right'\n    kicker_kick='Right'\n}\n\n\n\nif(strategy_to_use.text==\"Fictitious_Play\"){\n    \n\n//Handle Goalie Decision\n\nif(kicker_foot=='Left'){\n    total_sample_rolls=freq[0]+freq[1]+freq[2]\n    selected_dict=p['Left']\n    if(total_sample_rolls==0){\n        chance_left=1/3\n        chance_middle=1/3\n        chance_right=1/3\n    }\n    else{\n        chance_left=freq[0]/total_sample_rolls\n        chance_middle=freq[1]/total_sample_rolls\n        chance_right=freq[2]/total_sample_rolls\n    }\n}\nelse{\n    total_sample_rolls=freq[3]+freq[4]+freq[5]\n    selected_dict=p['Right']\n    if(total_sample_rolls==0){\n        chance_left=1/3\n        chance_middle=1/3\n        chance_right=1/3\n    }\n    else{\n        chance_left=freq[3]/total_sample_rolls\n        chance_middle=freq[4]/total_sample_rolls\n        chance_right=freq[5]/total_sample_rolls\n    }\n}\ndanger_goalie_left=(chance_left*selected_dict['LeftLeft']+chance_middle*selected_dict['MiddleLeft']+chance_right*selected_dict['RightLeft']);\ndanger_goalie_middle=(chance_left*selected_dict['LeftMiddle']+chance_middle*selected_dict['MiddleMiddle']+chance_right*selected_dict['RightMiddle'])\ndanger_goalie_right=(chance_left*selected_dict['LeftRight']+chance_middle*selected_dict['MiddleRight']+chance_right*selected_dict['RightRight'])\n    \n\nif(danger_goalie_left&lt;danger_goalie_middle){\n    if(danger_goalie_left&lt;danger_goalie_right){\n        goalie_action=\"Left\"\n    }\n    else if(danger_goalie_left==danger_goalie_right){\n        roll=Math.random()\n        if(roll&lt;=0.5){\n            goalie_action=\"Left\"\n        }\n        else{\n            goalie_action=\"Right\"\n        }\n    }\n    else{\n        goalie_action=\"Right\"\n    }\n}\nelse if (danger_goalie_left==danger_goalie_middle){\n    roll=Math.random()\n    if(roll&lt;=0.5){\n        goalie_action=\"Left\"\n    }\n    else{\n        goalie_action=\"Middle\"\n    }\n}\nelse{\n    if(danger_goalie_middle&lt;danger_goalie_right){\n        goalie_action=\"Middle\"\n    }\n    else if(danger_goalie_middle==danger_goalie_right){\n        roll=Math.random()\n        if(roll&lt;=0.5){\n            goalie_action=\"Middle\"\n        }\n        else{\n            goalie_action=\"Right\"\n        }\n    }\n    else{\n        goalie_action=\"Right\"\n    }    \n}\n\n\n}\nelse{\n    \n\nroll=Math.random()\nif(kicker_foot=='Left'){\n    if(roll&lt;=0.8){\n        goalie_action=\"Middle\"\n    }\n    else{\n        goalie_action=\"Left\"\n    }\n}\nelse if(kicker_foot=='Right'){\n    if(roll&lt;=0.7419){\n        goalie_action=\"Middle\"\n    }\n    else{\n        goalie_action=\"Right\"\n    }\n\n}\n\n\n}\n\n\n\n\n//Handle Score Chance:\n    \nroll=Math.random()\nscore_chance=p[kicker_foot][kicker_kick+goalie_action]\nif(roll&lt;=score_chance){\n    goal=1\n}\nelse{\n    goal=-1\n}\n//Display Score Chance:\n\nfor(var i=0; i&lt;=5; i++){\n    scoring_chance[i]=0;\n    scoring_roll[i]=0;\n}\n\nselected_index=0\nif(kicker_foot=='Right'){\n    selected_index+=3\n}\nif(kicker_kick=='Middle'){\n    selected_index+=1\n}\nelse if(kicker_kick=='Right'){\n    selected_index+=2\n}\n\nscoring_chance[selected_index]=score_chance\nscoring_roll[selected_index]=roll\n\n// Update text\n    \nvar n = (parseInt(nround.text) + 1)\nif(n&gt;=parseInt(iterations_to_run.text)){\n    b_auto_next.visible=false;\n}\nnround.text = n.toString()\n    \nvar s = parseInt(score.text) + goal\nscore.text = s.toString()\n\n\n\n//Animate Scenario:\n\nvar animation_roll=0;\nvar animation_slot=0;\nanimation_roll=Math.random()\n\nif(animation_roll&lt;=0.5){\n    animation_slot=1;\n}\n\nball.x = animation_positions[kicker_kick][animation_slot]\nball.y = bally\n\nif(goal==-1){\n    if(goalie_action==kicker_kick){\n        goalie_head.x = ball.x\n        goalie_body.x = ball.x\n    }\n    else{\n        if(kicker_kick==\"Right\"){\n            ball.x=70\n        }\n        else if(kicker_kick==\"Left\"){\n            ball.x=30\n        }\n        else{\n            ball.x=[30,70][animation_slot]\n        }\n    }\n\n}\nelse{\n    if(goalie_action==kicker_kick){\n        if(animation_slot==1){\n            goalie_head.x=animation_positions[goalie_action][0]\n            goalie_body.x=animation_positions[goalie_action][0]\n        }\n        else{\n            goalie_head.x=animation_positions[goalie_action][1]\n            goalie_body.x=animation_positions[goalie_action][1]\n        }\n    }else{\n        if(animation_roll&lt;=0.5){\n            animation_slot=1;\n        }else{\n            animation_slot=0;\n        }\n        goalie_head.x=animation_positions[goalie_action][animation_slot]\n        goalie_body.x=animation_positions[goalie_action][animation_slot]\n    }\n}\n\n\n\n//Update Goalie Frequency Tracking:\n    \n    selected_index=0\n    if(kicker_foot=='Right'){\n        selected_index+=3\n    }\n    if(kicker_kick=='Middle'){\n        selected_index+=1\n    }\n    else if(kicker_kick=='Right'){\n        selected_index+=2\n    }\n    \n    freq[selected_index]+=1\n\n    //Update Goalie Decision Tracking:\n    \nselected_index=0\n    if(kicker_foot=='Right'){\n        selected_index+=3\n    }\n    if(goalie_action=='Middle'){\n        selected_index+=1\n    }\n    else if(goalie_action=='Right'){\n        selected_index+=2\n    }\n    \n    decisions[selected_index]+=1\n\nif(strategy_to_use.text==\"Fictitious_Play\"){\n\n    //Update Goalie Perceived Risks:\n\n    selected_index=0\n    if(kicker_foot=='Right'){\n        selected_index+=3\n    }\n    for(var i=0; i&lt;=5; i++){\n        perceived_risks[i]=0\n    }\n    perceived_risks[selected_index]=danger_goalie_left\n    perceived_risks[selected_index+1]=danger_goalie_middle\n    perceived_risks[selected_index+2]=danger_goalie_right\n    \n}\n\n\n\ntxt.data['text'][0] = 'Rounds played: ' + n\n\nif (goal == 1) {\n    txt.data['text'][3] = 'GOAL!'\n} \nelse {\n    txt.data['text'][3] = 'Blocked'\n}\ntxt.data['text'][1] = 'Total score: ' + s\n\ntxt.change.emit()\n\nDistributionColumnDataSource.change.emit()\n"},"id":"1109","type":"CustomJS"},{"attributes":{"args":{"b_fl":{"id":"1066"},"b_fr":{"id":"1067"},"b_shoot":{"id":"1071"},"b_start":{"id":"1064"},"bl":{"id":"1068"},"bm":{"id":"1069"},"br":{"id":"1070"},"kicker_foot":{"id":"1060"},"kicker_kick":{"id":"1061"},"txt":{"id":"1052"}},"code":"\n    b_shoot.visible = true;\n    bl.visible = false;\n    bm.visible = false;\n    br.visible = false;\n    txt.data['text'][3] = ''\n    var current = txt.data['text'][2]\n    txt.data['text'][2] = current + ' Kicking Middle.'\n    kicker_kick.text= 'Middle'\n    txt.change.emit()\n    b_shoot.disabled = false;\n    "},"id":"1098","type":"CustomJS"},{"attributes":{"args":{"b_start_automate":{"id":"1073"},"strategy_dropdown":{"id":"1082"},"strategy_to_use":{"id":"1063"}},"code":"\n    strategy_dropdown.label=this.item;\n    strategy_to_use.text=this.item;\n    b_start_automate.visible=true;\n"},"id":"1117","type":"CustomJS"},{"attributes":{"button_type":"success","disabled":true,"icon":null,"js_event_callbacks":{"button_click":[{"id":"1093"}]},"label":"Next round","sizing_mode":"scale_width","width_policy":"fit"},"id":"1065","type":"Button"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1094"}]},"label":"Begin","sizing_mode":"scale_width","width_policy":"fit"},"id":"1064","type":"Button"},{"attributes":{"button_type":"success","disabled":true,"icon":null,"js_event_callbacks":{"button_click":[{"id":"1095"}]},"label":"Left-Footed","sizing_mode":"scale_width","width_policy":"fit"},"id":"1066","type":"Button"},{"attributes":{},"id":"1158","type":"StringEditor"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1097"}]},"label":"Left","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1068","type":"Button"},{"attributes":{},"id":"1159","type":"StringFormatter"},{"attributes":{"data_source":{"id":"1052"},"glyph":{"id":"1053"},"hover_glyph":null,"muted_glyph":null,"view":{"id":"1055"}},"id":"1054","type":"GlyphRenderer"},{"attributes":{"button_type":"success","disabled":true,"icon":null,"js_event_callbacks":{"button_click":[{"id":"1096"}]},"label":"Right-Footed","sizing_mode":"scale_width","width_policy":"fit"},"id":"1067","type":"Button"},{"attributes":{"end":500,"format":"0[.]00","js_property_callbacks":{"change:value":[{"id":"1116"}]},"sizing_mode":"stretch_width","start":10,"title":"Iterations To Run","value":50,"visible":false},"id":"1081","type":"Slider"},{"attributes":{"text_baseline":"ideographic","text_color":{"value":"whitesmoke"},"text_font_size":{"value":"15pt"},"x":{"field":"x"},"y":{"field":"y"},"y_offset":{"value":9}},"id":"1053","type":"Text"},{"attributes":{"data":{"aim_direction":["Left","Middle","Right","Left","Middle","Right"],"chances":[0.16666666666666666,0.16666666666666666,0.16666666666666666,0.16666666666666666,0.16666666666666666,0.16666666666666666],"footedness":["Left","Left","Left","Right","Right","Right"]},"selected":{"id":"1136"},"selection_policy":{"id":"1137"}},"id":"1101","type":"ColumnDataSource"},{"attributes":{"data":{"text":["Rounds played: 0","Total score: 0","","",""],"x":[2,70,2,14,14],"y":[86,86,5,40,32]},"selected":{"id":"1174"},"selection_policy":{"id":"1175"}},"id":"1052","type":"ColumnDataSource"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1098"}]},"label":"Middle","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1069","type":"Button"},{"attributes":{"editor":{"id":"1138"},"field":"footedness","formatter":{"id":"1139"},"title":"Striker Footedness"},"id":"1102","type":"TableColumn"},{"attributes":{"args":{"b_fl":{"id":"1066"},"b_fr":{"id":"1067"},"b_next":{"id":"1065"},"b_shoot":{"id":"1071"},"b_start":{"id":"1064"},"ball":{"id":"1040"},"freq_left_foot":{"id":"1058"},"freq_right_foot":{"id":"1059"},"goalie_body":{"id":"1033"},"goalie_head":{"id":"1032"},"kicker_foot":{"id":"1060"},"kicker_kick":{"id":"1061"},"nround":{"id":"1056"},"score":{"id":"1057"},"txt":{"id":"1052"}},"code":"\n// Define probability matrix\nvar p = {'Right' : {'LeftLeft' : 0.55,\n                    'LeftMiddle' : 0.65,\n                    'LeftRight' : 0.93,\n                    'MiddleLeft' : 0.74,\n                    'MiddleMiddle' : 0.60,\n                    'MiddleRight' : 0.72,\n                    'RightLeft' : 0.95,\n                    'RightMiddle' : 0.73,\n                    'RightRight' : 0.70},\n         'Left' :  {'LeftLeft' : 0.67,\n                    'LeftMiddle' : 0.70,\n                    'LeftRight' : 0.96,\n                    'MiddleLeft' : 0.74,\n                    'MiddleMiddle' : 0.60,\n                    'MiddleRight' : 0.72,\n                    'RightLeft' : 0.87,\n                    'RightMiddle' : 0.65,\n                    'RightRight' : 0.61}}\n\n// Choose best action\nvar freq\nif (kicker_foot.text == 'Right') {\n    freq = freq_right_foot.text.split(',').map(Number);\n} else {\n    freq = freq_left_foot.text.split(',').map(Number);\n}\n\nvar kicker_action = 'Left'\nvar expected = (freq[0]*p[kicker_foot.text]['LeftLeft'] + \n                freq[1]*p[kicker_foot.text]['MiddleLeft'] +\n                freq[2]*p[kicker_foot.text]['RightLeft'])   \nvar actions = [\"Left\", \"Middle\", \"Right\"]\nfor (var i = 0; i &lt; 3; i++) {\n    var val = (freq[0]*p[kicker_foot.text]['Left'+actions[i]] + \n               freq[1]*p[kicker_foot.text]['Middle'+actions[i]] + \n               freq[2]*p[kicker_foot.text]['Right'+actions[i]])\n    if (val &lt; expected) {\n        kicker_action = actions[i]\n        expected = val\n    }\n}    \n\n// Determine if goal\nvar goal = 1\nif (Math.random() &gt; p[kicker_foot.text][kicker_kick.text+kicker_action]) {\n    goal = -1\n}\n\n// Animate ball and goalie\nball.x = {'Left' : 40, 'Middle' : 50, 'Right' : 60}[kicker_kick.text]\nball.y = 63\ngoalie_head.x = {'Left' : 40, 'Middle' : 50, 'Right' : 60}[kicker_action]\ngoalie_body.x = {'Left' : 40, 'Middle' : 50, 'Right' : 60}[kicker_action]\n\n// Add to frequency history\nvar dict = {'Left'  : 0,\n            'Middle' : 1,\n            'Right'   : 2}\nif (kicker_foot.text == 'Right') {\n    var freq = freq_right_foot.text.split(',')\n    freq[dict[kicker_kick.text]] = parseInt(freq[dict[kicker_kick.text]]) + 1\n    freq_right_foot.text = freq.toString()\n} else {\n    var freq = freq_left_foot.text.split(',')\n    freq[dict[kicker_kick.text]] = parseInt(freq[dict[kicker_kick.text]]) + 1\n    freq_left_foot.text = freq.toString()\n}\n\n// Update text\nvar n = (parseInt(nround.text) + 1)\nnround.text = n.toString()\ntxt.data['text'][0] = 'Rounds played: ' + n\n\nif (goal == 1) {\n    txt.data['text'][3] = 'GOAL!'\n} else {\n    txt.data['text'][3] = 'Blocked'\n}\n\nvar s = parseInt(score.text) + goal\nscore.text = s.toString()\ntxt.data['text'][1] = 'Total score: ' + s\n\ntxt.change.emit()\n\n// Allow starting next round\nb_shoot.disabled = true;\nb_next.disabled = false;\n"},"id":"1100","type":"CustomJS"},{"attributes":{"args":{"ColumnDataSourceToChange":{"id":"1101"},"LL_aim_slider":{"id":"1075"},"LM_aim_slider":{"id":"1076"},"LR_aim_slider":{"id":"1077"},"RL_aim_slider":{"id":"1078"},"RM_aim_slider":{"id":"1079"},"RR_aim_slider":{"id":"1080"}},"code":"\n    var data=ColumnDataSourceToChange.data\n    var chances=data['chances']\n    \n    var total=0\n    total+=LL_aim_slider.value\n    total+=LM_aim_slider.value\n    total+=LR_aim_slider.value\n    total+=RL_aim_slider.value\n    total+=RM_aim_slider.value\n    total+=RR_aim_slider.value\n    \n    chances[0]=LL_aim_slider.value/total\n    chances[1]=LM_aim_slider.value/total\n    chances[2]=LR_aim_slider.value/total\n    chances[3]=RL_aim_slider.value/total\n    chances[4]=RM_aim_slider.value/total\n    chances[5]=RR_aim_slider.value/total\n    \n    ColumnDataSourceToChange.change.emit()\n"},"id":"1110","type":"CustomJS"},{"attributes":{"sizing_mode":"stretch_width","visible":false},"id":"1060","type":"Div"},{"attributes":{"columns":[{"id":"1102"},{"id":"1103"},{"id":"1104"}],"height":280,"sizing_mode":"stretch_height","source":{"id":"1101"},"view":{"id":"1106"},"visible":false,"width":400},"id":"1105","type":"DataTable"},{"attributes":{"args":{"b_fl":{"id":"1066"},"b_fr":{"id":"1067"},"b_start":{"id":"1064"},"bl":{"id":"1068"},"bm":{"id":"1069"},"br":{"id":"1070"},"kicker_foot":{"id":"1060"},"txt":{"id":"1052"}},"code":"\n    b_fl.disabled = true;\n    b_fr.disabled = true;\n    b_fl.visible = false;\n    b_fr.visible = false;\n    bl.visible = true;\n    bm.visible = true;\n    br.visible = true;\n    txt.data['text'][3] = 'Choose where to kick!'\n    txt.data['text'][2] = 'Right-footed kicker.'\n    kicker_foot.text= 'Right'\n    txt.change.emit()\n    "},"id":"1096","type":"CustomJS"},{"attributes":{"end":1,"format":"0[.]00","js_property_callbacks":{"change:value":[{"id":"1115"}]},"sizing_mode":"stretch_width","start":0,"step":0.01,"title":"RR Aim Weight","value":0.16666666666666666,"visible":false},"id":"1080","type":"Slider"},{"attributes":{"source":{"id":"1052"}},"id":"1055","type":"CDSView"},{"attributes":{"editor":{"id":"1142"},"field":"chances","formatter":{"id":"1143"},"title":"Chance"},"id":"1104","type":"TableColumn"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1099"}]},"label":"Right","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1070","type":"Button"},{"attributes":{"editor":{"id":"1140"},"field":"aim_direction","formatter":{"id":"1141"},"title":"Striker Aim Direction"},"id":"1103","type":"TableColumn"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1100"}]},"label":"SHOOT!","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1071","type":"Button"},{"attributes":{"args":{"ColumnDataSourceToChange":{"id":"1101"},"LL_aim_slider":{"id":"1075"},"LM_aim_slider":{"id":"1076"},"LR_aim_slider":{"id":"1077"},"RL_aim_slider":{"id":"1078"},"RM_aim_slider":{"id":"1079"},"RR_aim_slider":{"id":"1080"}},"code":"\n    var data=ColumnDataSourceToChange.data\n    var chances=data['chances']\n    \n    var total=0\n    total+=LL_aim_slider.value\n    total+=LM_aim_slider.value\n    total+=LR_aim_slider.value\n    total+=RL_aim_slider.value\n    total+=RM_aim_slider.value\n    total+=RR_aim_slider.value\n    \n    chances[0]=LL_aim_slider.value/total\n    chances[1]=LM_aim_slider.value/total\n    chances[2]=LR_aim_slider.value/total\n    chances[3]=RL_aim_slider.value/total\n    chances[4]=RM_aim_slider.value/total\n    chances[5]=RR_aim_slider.value/total\n    \n    ColumnDataSourceToChange.change.emit()\n"},"id":"1111","type":"CustomJS"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1107"}]},"label":"Automate","sizing_mode":"scale_width","width_policy":"fit"},"id":"1072","type":"Button"},{"attributes":{"source":{"id":"1101"}},"id":"1106","type":"CDSView"},{"attributes":{"args":{"ColumnDataSourceToChange":{"id":"1101"},"LL_aim_slider":{"id":"1075"},"LM_aim_slider":{"id":"1076"},"LR_aim_slider":{"id":"1077"},"RL_aim_slider":{"id":"1078"},"RM_aim_slider":{"id":"1079"},"RR_aim_slider":{"id":"1080"}},"code":"\n    var data=ColumnDataSourceToChange.data\n    var chances=data['chances']\n    \n    var total=0\n    total+=LL_aim_slider.value\n    total+=LM_aim_slider.value\n    total+=LR_aim_slider.value\n    total+=RL_aim_slider.value\n    total+=RM_aim_slider.value\n    total+=RR_aim_slider.value\n    \n    chances[0]=LL_aim_slider.value/total\n    chances[1]=LM_aim_slider.value/total\n    chances[2]=LR_aim_slider.value/total\n    chances[3]=RL_aim_slider.value/total\n    chances[4]=RM_aim_slider.value/total\n    chances[5]=RR_aim_slider.value/total\n    \n    ColumnDataSourceToChange.change.emit()\n"},"id":"1112","type":"CustomJS"},{"attributes":{"editor":{"id":"1150"},"field":"freq","formatter":{"id":"1151"},"title":"Frequency"},"id":"1086","type":"TableColumn"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1108"}]},"label":"Start","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1073","type":"Button"},{"attributes":{"args":{"ColumnDataSourceToChange":{"id":"1101"},"LL_aim_slider":{"id":"1075"},"LM_aim_slider":{"id":"1076"},"LR_aim_slider":{"id":"1077"},"RL_aim_slider":{"id":"1078"},"RM_aim_slider":{"id":"1079"},"RR_aim_slider":{"id":"1080"}},"code":"\n    var data=ColumnDataSourceToChange.data\n    var chances=data['chances']\n    \n    var total=0\n    total+=LL_aim_slider.value\n    total+=LM_aim_slider.value\n    total+=LR_aim_slider.value\n    total+=RL_aim_slider.value\n    total+=RM_aim_slider.value\n    total+=RR_aim_slider.value\n    \n    chances[0]=LL_aim_slider.value/total\n    chances[1]=LM_aim_slider.value/total\n    chances[2]=LR_aim_slider.value/total\n    chances[3]=RL_aim_slider.value/total\n    chances[4]=RM_aim_slider.value/total\n    chances[5]=RR_aim_slider.value/total\n    \n    ColumnDataSourceToChange.change.emit()\n"},"id":"1113","type":"CustomJS"},{"attributes":{"data":{"line_alpha":[1,1,1],"line_color":["lightgreen","lightgreen","whitesmoke"],"xs":[[24,76,78,22,24],[3,12,88,97,3],[34,34,66,66]],"ys":[[63,63,47,47,63],[15,63,63,15,15],[63,82,82,63]]},"selected":{"id":"1160"},"selection_policy":{"id":"1161"}},"id":"1022","type":"ColumnDataSource"},{"attributes":{"background_fill_color":"green","below":[{"id":"1013"}],"center":[{"id":"1016"},{"id":"1020"}],"left":[{"id":"1017"}],"outline_line_color":null,"plot_height":480,"renderers":[{"id":"1025"},{"id":"1030"},{"id":"1035"},{"id":"1038"},{"id":"1042"},{"id":"1046"},{"id":"1050"},{"id":"1054"}],"sizing_mode":"stretch_height","title":{"id":"1003"},"toolbar":{"id":"1021"},"toolbar_location":null,"x_range":{"id":"1005"},"x_scale":{"id":"1009"},"y_range":{"id":"1007"},"y_scale":{"id":"1011"}},"id":"1002","subtype":"Figure","type":"Plot"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1109"}]},"label":"Next","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1074","type":"Button"},{"attributes":{"args":{"ColumnDataSourceToChange":{"id":"1101"},"LL_aim_slider":{"id":"1075"},"LM_aim_slider":{"id":"1076"},"LR_aim_slider":{"id":"1077"},"RL_aim_slider":{"id":"1078"},"RM_aim_slider":{"id":"1079"},"RR_aim_slider":{"id":"1080"}},"code":"\n    var data=ColumnDataSourceToChange.data\n    var chances=data['chances']\n    \n    var total=0\n    total+=LL_aim_slider.value\n    total+=LM_aim_slider.value\n    total+=LR_aim_slider.value\n    total+=RL_aim_slider.value\n    total+=RM_aim_slider.value\n    total+=RR_aim_slider.value\n    \n    chances[0]=LL_aim_slider.value/total\n    chances[1]=LM_aim_slider.value/total\n    chances[2]=LR_aim_slider.value/total\n    chances[3]=RL_aim_slider.value/total\n    chances[4]=RM_aim_slider.value/total\n    chances[5]=RR_aim_slider.value/total\n    \n    ColumnDataSourceToChange.change.emit()\n"},"id":"1114","type":"CustomJS"},{"attributes":{"args":{"ColumnDataSourceToChange":{"id":"1101"},"LL_aim_slider":{"id":"1075"},"LM_aim_slider":{"id":"1076"},"LR_aim_slider":{"id":"1077"},"RL_aim_slider":{"id":"1078"},"RM_aim_slider":{"id":"1079"},"RR_aim_slider":{"id":"1080"}},"code":"\n    var data=ColumnDataSourceToChange.data\n    var chances=data['chances']\n    \n    var total=0\n    total+=LL_aim_slider.value\n    total+=LM_aim_slider.value\n    total+=LR_aim_slider.value\n    total+=RL_aim_slider.value\n    total+=RM_aim_slider.value\n    total+=RR_aim_slider.value\n    \n    chances[0]=LL_aim_slider.value/total\n    chances[1]=LM_aim_slider.value/total\n    chances[2]=LR_aim_slider.value/total\n    chances[3]=RL_aim_slider.value/total\n    chances[4]=RM_aim_slider.value/total\n    chances[5]=RR_aim_slider.value/total\n    \n    ColumnDataSourceToChange.change.emit()\n"},"id":"1115","type":"CustomJS"},{"attributes":{"end":1,"format":"0[.]00","js_property_callbacks":{"change:value":[{"id":"1110"}]},"sizing_mode":"stretch_width","start":0,"step":0.01,"title":"LL Aim Weight","value":0.16666666666666666,"visible":false},"id":"1075","type":"Slider"},{"attributes":{"editor":{"id":"1148"},"field":"aim_direction","formatter":{"id":"1149"},"title":"Striker Aim Direction"},"id":"1085","type":"TableColumn"},{"attributes":{"sizing_mode":"stretch_width","text":"0,0,0","visible":false},"id":"1059","type":"Div"},{"attributes":{},"id":"1146","type":"StringEditor"},{"attributes":{"end":1,"format":"0[.]00","js_property_callbacks":{"change:value":[{"id":"1111"}]},"sizing_mode":"stretch_width","start":0,"step":0.01,"title":"LM Aim Weight","value":0.16666666666666666,"visible":false},"id":"1076","type":"Slider"},{"attributes":{"end":1,"format":"0[.]00","js_property_callbacks":{"change:value":[{"id":"1113"}]},"sizing_mode":"stretch_width","start":0,"step":0.01,"title":"RL Aim Weight","value":0.16666666666666666,"visible":false},"id":"1078","type":"Slider"},{"attributes":{},"id":"1150","type":"StringEditor"},{"attributes":{"end":1,"format":"0[.]00","js_property_callbacks":{"change:value":[{"id":"1114"}]},"sizing_mode":"stretch_width","start":0,"step":0.01,"title":"RM Aim Weight","value":0.16666666666666666,"visible":false},"id":"1079","type":"Slider"},{"attributes":{"data":{},"selected":{"id":"1162"},"selection_policy":{"id":"1163"}},"id":"1027","type":"ColumnDataSource"},{"attributes":{},"id":"1145","type":"UnionRenderers"},{"attributes":{"text":"FIFA 2020 Penalty Simulator","text_font_size":{"value":"15pt"}},"id":"1003","type":"Title"},{"attributes":{"end":100},"id":"1005","type":"Range1d"},{"attributes":{"editor":{"id":"1146"},"field":"footedness","formatter":{"id":"1147"},"title":"Striker Footedness"},"id":"1084","type":"TableColumn"},{"attributes":{"editor":{"id":"1152"},"field":"decisions","formatter":{"id":"1153"},"title":"Goalie Decisions"},"id":"1087","type":"TableColumn"},{"attributes":{},"id":"1014","type":"BasicTicker"},{"attributes":{"args":{"b_fl":{"id":"1066"},"b_fr":{"id":"1067"},"b_shoot":{"id":"1071"},"b_start":{"id":"1064"},"bl":{"id":"1068"},"bm":{"id":"1069"},"br":{"id":"1070"},"kicker_foot":{"id":"1060"},"kicker_kick":{"id":"1061"},"txt":{"id":"1052"}},"code":"\n    b_shoot.visible = true;\n    bl.visible = false;\n    bm.visible = false;\n    br.visible = false;\n    txt.data['text'][3] = ''\n    var current = txt.data['text'][2]\n    txt.data['text'][2] = current + ' Kicking Left.'\n    kicker_kick.text= 'Left'\n    txt.change.emit()\n    b_shoot.disabled = false;\n    "},"id":"1097","type":"CustomJS"},{"attributes":{"button_type":"warning","icon":null,"js_event_callbacks":{"menu_item_click":[{"id":"1117"}]},"label":"CPU strategy to Use","menu":[["Fictitious_Play","Fictitious_Play"],["Mixed_Strategy","Mixed_Strategy"]],"sizing_mode":"stretch_width","visible":false},"id":"1082","type":"Dropdown"},{"attributes":{"editor":{"id":"1154"},"field":"goalie_perceived_risks","formatter":{"id":"1155"},"title":"Goalie's Perceived Risks"},"id":"1088","type":"TableColumn"},{"attributes":{"args":{"b_fl":{"id":"1066"},"b_fr":{"id":"1067"},"b_start":{"id":"1064"},"bl":{"id":"1068"},"bm":{"id":"1069"},"br":{"id":"1070"},"kicker_foot":{"id":"1060"},"txt":{"id":"1052"}},"code":"\n    b_fl.disabled = true;\n    b_fr.disabled = true;\n    b_fl.visible = false;\n    b_fr.visible = false;\n    bl.visible = true;\n    bm.visible = true;\n    br.visible = true;\n    txt.data['text'][3] = 'Choose where to kick!'\n    txt.data['text'][2] = 'Left-footed kicker.'\n    kicker_foot.text= 'Left'\n    txt.change.emit()\n    "},"id":"1095","type":"CustomJS"},{"attributes":{},"id":"1139","type":"StringFormatter"},{"attributes":{"editor":{"id":"1156"},"field":"striker_score_chance","formatter":{"id":"1157"},"title":"Striker's Score Chance"},"id":"1089","type":"TableColumn"},{"attributes":{},"id":"1011","type":"LinearScale"},{"attributes":{"args":{"b_fl":{"id":"1066"},"b_fr":{"id":"1067"},"b_next":{"id":"1065"},"b_shoot":{"id":"1071"},"b_start":{"id":"1064"},"ball":{"id":"1040"},"bl":{"id":"1068"},"bm":{"id":"1069"},"br":{"id":"1070"},"goalie_body":{"id":"1033"},"goalie_head":{"id":"1032"},"txt":{"id":"1052"}},"code":"\nb_shoot.visible = false;\n\nb_fr.visible = true;\nb_fl.visible = true;\nb_fr.disabled = false;\nb_fl.disabled = false;\n\nbl.visible = false;\nbm.visible = false;\nbr.visible = false;\n\nb_next.disabled = true;\n\ntxt.data['text'][2] = ''\ntxt.data['text'][3] = 'Choose a right- or left footed kicker!'\ntxt.change.emit()  \n\nball.x = 50\nball.y = 13\ngoalie_head.x = 50\ngoalie_body.x = 50\n"},"id":"1093","type":"CustomJS"},{"attributes":{},"id":"1148","type":"StringEditor"},{"attributes":{"editor":{"id":"1158"},"field":"striker_score_roll","formatter":{"id":"1159"},"title":"Striker's Score Roll"},"id":"1090","type":"TableColumn"},{"attributes":{},"id":"1143","type":"StringFormatter"},{"attributes":{"sizing_mode":"stretch_width","visible":false},"id":"1061","type":"Div"},{"attributes":{"data":{"aim_direction":["Left","Middle","Right","Left","Middle","Right"],"decisions":[0,0,0,0,0,0],"footedness":["Left","Left","Left","Right","Right","Right"],"freq":[0,0,0,0,0,0],"goalie_perceived_risks":[0,0,0,0,0,0],"striker_score_chance":[0,0,0,0,0,0],"striker_score_roll":[0,0,0,0,0,0]},"selected":{"id":"1144"},"selection_policy":{"id":"1145"}},"id":"1083","type":"ColumnDataSource"},{"attributes":{},"id":"1144","type":"Selection"},{"attributes":{"axis":{"id":"1013"},"grid_line_color":null,"ticker":null},"id":"1016","type":"Grid"},{"attributes":{},"id":"1140","type":"StringEditor"},{"attributes":{},"id":"1149","type":"StringFormatter"},{"attributes":{"formatter":{"id":"1135"},"ticker":{"id":"1018"},"visible":false},"id":"1017","type":"LinearAxis"},{"attributes":{"fill_color":{"value":"lightblue"},"line_width":{"value":2},"size":{"units":"screen","value":21},"x":{"value":50},"y":{"value":16}},"id":"1044","type":"Circle"},{"attributes":{},"id":"1169","type":"UnionRenderers"},{"attributes":{},"id":"1018","type":"BasicTicker"},{"attributes":{},"id":"1168","type":"Selection"},{"attributes":{},"id":"1171","type":"UnionRenderers"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto"},"id":"1021","type":"Toolbar"},{"attributes":{"data_source":{"id":"1041"},"glyph":{"id":"1040"},"hover_glyph":null,"muted_glyph":null,"view":{"id":"1043"}},"id":"1042","type":"GlyphRenderer"},{"attributes":{},"id":"1170","type":"Selection"},{"attributes":{"source":{"id":"1041"}},"id":"1043","type":"CDSView"},{"attributes":{"children":[{"id":"1078"}],"max_width":400,"sizing_mode":"stretch_width"},"id":"1125","type":"Row"},{"attributes":{},"id":"1173","type":"UnionRenderers"},{"attributes":{},"id":"1133","type":"BasicTickFormatter"},{"attributes":{"fill_color":{"value":"lightblue"},"height":{"units":"data","value":6},"line_width":{"value":2},"width":{"units":"data","value":4},"x":{"value":50},"y":{"value":11}},"id":"1048","type":"Rect"},{"attributes":{},"id":"1172","type":"Selection"},{"attributes":{"axis":{"id":"1017"},"dimension":1,"grid_line_color":null,"ticker":null},"id":"1020","type":"Grid"},{"attributes":{"data_source":{"id":"1045"},"glyph":{"id":"1044"},"hover_glyph":null,"muted_glyph":null,"view":{"id":"1047"}},"id":"1046","type":"GlyphRenderer"},{"attributes":{},"id":"1175","type":"UnionRenderers"},{"attributes":{"data":{},"selected":{"id":"1170"},"selection_policy":{"id":"1171"}},"id":"1045","type":"ColumnDataSource"},{"attributes":{"args":{"b_fl":{"id":"1066"},"b_fr":{"id":"1067"},"b_next":{"id":"1065"},"b_shoot":{"id":"1071"},"b_start":{"id":"1064"},"ball":{"id":"1040"},"bl":{"id":"1068"},"bm":{"id":"1069"},"br":{"id":"1070"},"freq_left_foot":{"id":"1058"},"freq_right_foot":{"id":"1059"},"goalie_body":{"id":"1033"},"goalie_head":{"id":"1032"},"kicker_foot":{"id":"1060"},"kicker_kick":{"id":"1061"},"nround":{"id":"1056"},"score":{"id":"1057"},"txt":{"id":"1052"}},"code":"\nb_shoot.visible = false;\n\nb_fr.visible = true;\nb_fl.visible = true;\nb_fr.disabled = false;\nb_fl.disabled = false;\n\nbl.visible = false;\nbm.visible = false;\nbr.visible = false;\n\nb_next.disabled = true;\n\ntxt.data['text'][2] = ''\ntxt.data['text'][3] = 'Choose a right- or left footed kicker!'\ntxt.change.emit()  \n\nball.x = 50\nball.y = 13\ngoalie_head.x = 50\ngoalie_body.x = 50\n\nif (b_start.label == 'Begin') {\n    b_start.label = 'Restart'\n} else {\n    txt.data['text'][0] = 'Rounds played: 0'\n    txt.data['text'][1] = 'Total score: 0'\n    txt.data['text'][2] = ''\n    txt.data['text'][3] = ''\n    txt.data['text'][4] = ''\n    nround.text='0'\n    score.text='0'\n    freq_left_foot.text='0,0,0'\n    freq_right_foot.text='0,0,0'\n    kicker_foot.text=''\n    kicker_kick.text=''\n    txt.change.emit() \n    b_start.label = 'Begin'\n}\n"},"id":"1094","type":"CustomJS"},{"attributes":{},"id":"1174","type":"Selection"},{"attributes":{"children":[{"id":"1119"},{"id":"1120"},{"id":"1121"},{"id":"1122"},{"id":"1123"},{"id":"1124"},{"id":"1125"},{"id":"1126"},{"id":"1127"},{"id":"1105"},{"id":"1091"}],"max_width":400,"sizing_mode":"stretch_height"},"id":"1129","type":"Column"},{"attributes":{"children":[{"id":"1179"},{"id":"1177"}]},"id":"1180","type":"Column"},{"attributes":{"source":{"id":"1045"}},"id":"1047","type":"CDSView"},{"attributes":{"data_source":{"id":"1049"},"glyph":{"id":"1048"},"hover_glyph":null,"muted_glyph":null,"view":{"id":"1051"}},"id":"1050","type":"GlyphRenderer"},{"attributes":{"line_alpha":{"value":0.1},"line_color":{"field":"line_color"},"line_width":{"value":4},"xs":{"field":"xs"},"ys":{"field":"ys"}},"id":"1024","type":"MultiLine"},{"attributes":{"toolbars":[{"id":"1021"}]},"id":"1178","type":"ProxyToolbar"},{"attributes":{"toolbar":{"id":"1178"},"toolbar_location":"above"},"id":"1179","type":"ToolbarBox"},{"attributes":{"data":{},"selected":{"id":"1172"},"selection_policy":{"id":"1173"}},"id":"1049","type":"ColumnDataSource"},{"attributes":{"line_alpha":{"field":"line_alpha"},"line_color":{"field":"line_color"},"line_width":{"value":4},"xs":{"field":"xs"},"ys":{"field":"ys"}},"id":"1023","type":"MultiLine"},{"attributes":{"children":[[{"id":"1130"},0,0]]},"id":"1177","type":"GridBox"},{"attributes":{"data_source":{"id":"1022"},"glyph":{"id":"1023"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1024"},"selection_glyph":null,"view":{"id":"1026"}},"id":"1025","type":"GlyphRenderer"},{"attributes":{"children":[{"id":"1079"}],"max_width":400,"sizing_mode":"stretch_width"},"id":"1126","type":"Row"},{"attributes":{"source":{"id":"1049"}},"id":"1051","type":"CDSView"},{"attributes":{"children":[{"id":"1128"},{"id":"1129"}],"max_width":1200,"sizing_mode":"stretch_height"},"id":"1130","type":"Row"},{"attributes":{"source":{"id":"1022"}},"id":"1026","type":"CDSView"},{"attributes":{},"id":"1136","type":"Selection"},{"attributes":{"children":[{"id":"1002"},{"id":"1118"}],"max_width":600,"sizing_mode":"stretch_height"},"id":"1128","type":"Column"},{"attributes":{"fill_color":{"value":"red"},"line_width":{"value":2},"size":{"units":"screen","value":17},"x":{"value":50},"y":{"value":69}},"id":"1032","type":"Circle"},{"attributes":{"args":{"ChancesColumnDataSource":{"id":"1101"},"DistributionColumnDataSource":{"id":"1083"},"LL_aim_slider":{"id":"1075"},"LM_aim_slider":{"id":"1076"},"LR_aim_slider":{"id":"1077"},"RL_aim_slider":{"id":"1078"},"RM_aim_slider":{"id":"1079"},"RR_aim_slider":{"id":"1080"},"automation_distribution_table":{"id":"1091"},"automation_table":{"id":"1105"},"b_auto_next":{"id":"1074"},"b_automate":{"id":"1072"},"b_fl":{"id":"1066"},"b_fr":{"id":"1067"},"b_next":{"id":"1065"},"b_start":{"id":"1064"},"b_start_automate":{"id":"1073"},"ball":{"id":"1040"},"goalie_body":{"id":"1033"},"goalie_head":{"id":"1032"},"iterations_slider":{"id":"1081"},"iterations_to_run":{"id":"1062"},"nround":{"id":"1056"},"score":{"id":"1057"},"strategy_dropdown":{"id":"1082"},"strategy_to_use":{"id":"1063"},"txt":{"id":"1052"}},"code":"\n\nb_start_automate.visible=false;\nb_auto_next.visible=true;\n\nLL_aim_slider.visible=false;\nLM_aim_slider.visible=false;\nLR_aim_slider.visible=false;\nRL_aim_slider.visible=false;\nRM_aim_slider.visible=false;\nRR_aim_slider.visible=false;\n\niterations_slider.visible=false;\n\nstrategy_dropdown.visible=false;\n\nautomation_table.visible=false;\nautomation_distribution_table.visible=true;\n\n\n\n// Define probability matrix\nvar p = {'Right' : {'LeftLeft' : 0.55,\n                    'LeftMiddle' : 0.65,\n                    'LeftRight' : 0.93,\n                    'MiddleLeft' : 0.74,\n                    'MiddleMiddle' : 0.60,\n                    'MiddleRight' : 0.72,\n                    'RightLeft' : 0.95,\n                    'RightMiddle' : 0.73,\n                    'RightRight' : 0.70},\n         'Left' :  {'LeftLeft' : 0.67,\n                    'LeftMiddle' : 0.70,\n                   'LeftRight' : 0.96,\n                    'MiddleLeft' : 0.74,\n                    'MiddleMiddle' : 0.60,\n                    'MiddleRight' : 0.72,\n                    'RightLeft' : 0.87,\n                    'RightMiddle' : 0.65,\n                    'RightRight' : 0.61}}\n\n//Obtain the Shot Aim chances from the column data source\n    var chances_data=ChancesColumnDataSource.data\n    var chances=chances_data['chances']\n    var LL_chance=chances[0]\n    var LM_chance=LL_chance+chances[1]\n    var LR_chance=LM_chance+chances[2]\n    var RL_chance=LR_chance+chances[3]\n    var RM_chance=RL_chance+chances[4]\n\n//Goalie Logic Decision Making Variables\n    var chance_left=1/3;\n    var chance_middle=1/3;\n    var chance_right=1/3;\n\n    var danger_goalie_left=0;\n    var danger_goalie_middle=0;\n    var danger_goalie_right=0;\n    var selected_dict=0;\n\n    var total_sample_rolls\n\n    var goalie_action=\"None\"\n\n//Loop Randomness Variable\n    var roll=0;\n\n//Goalie Fictitious Learning Variables\n    var selected_index=0;\n\n    var dist_data=DistributionColumnDataSource.data\n    var freq=dist_data['freq']\n    var decisions=dist_data['decisions']\n\n//Data Display Variables\n    var perceived_risks=dist_data['goalie_perceived_risks']\n    var scoring_chance=dist_data['striker_score_chance']\n    var scoring_roll=dist_data['striker_score_roll']\n\n//Striker Kick Choice Variables\n    var kicker_foot='none'\n    var kicker_kick='none'\n\n//Scoring Variables\n    var score_chance=0\n    var goal=1\n\n//Animation Variables\n    var animation_positions = {'Left':[37, 43], 'Middle':[47,53], 'Right':[57, 63]}\n    var bally=63\n\n\n//Handle Automated Selection\nroll=Math.random();    \n    \nif(roll&lt;=LL_chance){\n    kicker_foot='Left'\n    kicker_kick='Left'\n}\nelse if(roll&lt;=LM_chance){\n    kicker_foot='Left'\n    kicker_kick='Middle'\n}\nelse if(roll&lt;=LR_chance){\n    kicker_foot='Left'\n    kicker_kick='Right'\n}\nelse if(roll&lt;=RL_chance){\n    kicker_foot='Right'\n    kicker_kick='Left'\n}\nelse if(roll&lt;=RM_chance){\n    kicker_foot='Right'\n    kicker_kick='Middle'\n}\nelse{\n    kicker_foot='Right'\n    kicker_kick='Right'\n}\n\n\n\nif(strategy_to_use.text==\"Fictitious_Play\"){\n    \n\n//Handle Goalie Decision\n\nif(kicker_foot=='Left'){\n    total_sample_rolls=freq[0]+freq[1]+freq[2]\n    selected_dict=p['Left']\n    if(total_sample_rolls==0){\n        chance_left=1/3\n        chance_middle=1/3\n        chance_right=1/3\n    }\n    else{\n        chance_left=freq[0]/total_sample_rolls\n        chance_middle=freq[1]/total_sample_rolls\n        chance_right=freq[2]/total_sample_rolls\n    }\n}\nelse{\n    total_sample_rolls=freq[3]+freq[4]+freq[5]\n    selected_dict=p['Right']\n    if(total_sample_rolls==0){\n        chance_left=1/3\n        chance_middle=1/3\n        chance_right=1/3\n    }\n    else{\n        chance_left=freq[3]/total_sample_rolls\n        chance_middle=freq[4]/total_sample_rolls\n        chance_right=freq[5]/total_sample_rolls\n    }\n}\ndanger_goalie_left=(chance_left*selected_dict['LeftLeft']+chance_middle*selected_dict['MiddleLeft']+chance_right*selected_dict['RightLeft']);\ndanger_goalie_middle=(chance_left*selected_dict['LeftMiddle']+chance_middle*selected_dict['MiddleMiddle']+chance_right*selected_dict['RightMiddle'])\ndanger_goalie_right=(chance_left*selected_dict['LeftRight']+chance_middle*selected_dict['MiddleRight']+chance_right*selected_dict['RightRight'])\n    \n\nif(danger_goalie_left&lt;danger_goalie_middle){\n    if(danger_goalie_left&lt;danger_goalie_right){\n        goalie_action=\"Left\"\n    }\n    else if(danger_goalie_left==danger_goalie_right){\n        roll=Math.random()\n        if(roll&lt;=0.5){\n            goalie_action=\"Left\"\n        }\n        else{\n            goalie_action=\"Right\"\n        }\n    }\n    else{\n        goalie_action=\"Right\"\n    }\n}\nelse if (danger_goalie_left==danger_goalie_middle){\n    roll=Math.random()\n    if(roll&lt;=0.5){\n        goalie_action=\"Left\"\n    }\n    else{\n        goalie_action=\"Middle\"\n    }\n}\nelse{\n    if(danger_goalie_middle&lt;danger_goalie_right){\n        goalie_action=\"Middle\"\n    }\n    else if(danger_goalie_middle==danger_goalie_right){\n        roll=Math.random()\n        if(roll&lt;=0.5){\n            goalie_action=\"Middle\"\n        }\n        else{\n            goalie_action=\"Right\"\n        }\n    }\n    else{\n        goalie_action=\"Right\"\n    }    \n}\n\n\n}\nelse{\n    \n\nroll=Math.random()\nif(kicker_foot=='Left'){\n    if(roll&lt;=0.8){\n        goalie_action=\"Middle\"\n    }\n    else{\n        goalie_action=\"Left\"\n    }\n}\nelse if(kicker_foot=='Right'){\n    if(roll&lt;=0.7419){\n        goalie_action=\"Middle\"\n    }\n    else{\n        goalie_action=\"Right\"\n    }\n\n}\n\n\n}\n\n\n\n\n//Handle Score Chance:\n    \nroll=Math.random()\nscore_chance=p[kicker_foot][kicker_kick+goalie_action]\nif(roll&lt;=score_chance){\n    goal=1\n}\nelse{\n    goal=-1\n}\n//Display Score Chance:\n\nfor(var i=0; i&lt;=5; i++){\n    scoring_chance[i]=0;\n    scoring_roll[i]=0;\n}\n\nselected_index=0\nif(kicker_foot=='Right'){\n    selected_index+=3\n}\nif(kicker_kick=='Middle'){\n    selected_index+=1\n}\nelse if(kicker_kick=='Right'){\n    selected_index+=2\n}\n\nscoring_chance[selected_index]=score_chance\nscoring_roll[selected_index]=roll\n\n// Update text\n    \nvar n = (parseInt(nround.text) + 1)\nif(n&gt;=parseInt(iterations_to_run.text)){\n    b_auto_next.visible=false;\n}\nnround.text = n.toString()\n    \nvar s = parseInt(score.text) + goal\nscore.text = s.toString()\n\n\n\n//Animate Scenario:\n\nvar animation_roll=0;\nvar animation_slot=0;\nanimation_roll=Math.random()\n\nif(animation_roll&lt;=0.5){\n    animation_slot=1;\n}\n\nball.x = animation_positions[kicker_kick][animation_slot]\nball.y = bally\n\nif(goal==-1){\n    if(goalie_action==kicker_kick){\n        goalie_head.x = ball.x\n        goalie_body.x = ball.x\n    }\n    else{\n        if(kicker_kick==\"Right\"){\n            ball.x=70\n        }\n        else if(kicker_kick==\"Left\"){\n            ball.x=30\n        }\n        else{\n            ball.x=[30,70][animation_slot]\n        }\n    }\n\n}\nelse{\n    if(goalie_action==kicker_kick){\n        if(animation_slot==1){\n            goalie_head.x=animation_positions[goalie_action][0]\n            goalie_body.x=animation_positions[goalie_action][0]\n        }\n        else{\n            goalie_head.x=animation_positions[goalie_action][1]\n            goalie_body.x=animation_positions[goalie_action][1]\n        }\n    }else{\n        if(animation_roll&lt;=0.5){\n            animation_slot=1;\n        }else{\n            animation_slot=0;\n        }\n        goalie_head.x=animation_positions[goalie_action][animation_slot]\n        goalie_body.x=animation_positions[goalie_action][animation_slot]\n    }\n}\n\n\n\n//Update Goalie Frequency Tracking:\n    \n    selected_index=0\n    if(kicker_foot=='Right'){\n        selected_index+=3\n    }\n    if(kicker_kick=='Middle'){\n        selected_index+=1\n    }\n    else if(kicker_kick=='Right'){\n        selected_index+=2\n    }\n    \n    freq[selected_index]+=1\n\n    //Update Goalie Decision Tracking:\n    \nselected_index=0\n    if(kicker_foot=='Right'){\n        selected_index+=3\n    }\n    if(goalie_action=='Middle'){\n        selected_index+=1\n    }\n    else if(goalie_action=='Right'){\n        selected_index+=2\n    }\n    \n    decisions[selected_index]+=1\n\nif(strategy_to_use.text==\"Fictitious_Play\"){\n\n    //Update Goalie Perceived Risks:\n\n    selected_index=0\n    if(kicker_foot=='Right'){\n        selected_index+=3\n    }\n    for(var i=0; i&lt;=5; i++){\n        perceived_risks[i]=0\n    }\n    perceived_risks[selected_index]=danger_goalie_left\n    perceived_risks[selected_index+1]=danger_goalie_middle\n    perceived_risks[selected_index+2]=danger_goalie_right\n    \n}\n\n\n\ntxt.data['text'][0] = 'Rounds played: ' + n\n\nif (goal == 1) {\n    txt.data['text'][3] = 'GOAL!'\n} \nelse {\n    txt.data['text'][3] = 'Blocked'\n}\ntxt.data['text'][1] = 'Total score: ' + s\n\ntxt.change.emit()\n\nDistributionColumnDataSource.change.emit()\n"},"id":"1108","type":"CustomJS"},{"attributes":{"children":[{"id":"1080"}],"max_width":400,"sizing_mode":"stretch_width"},"id":"1127","type":"Row"},{"attributes":{"data_source":{"id":"1027"},"glyph":{"id":"1028"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1029"},"selection_glyph":null,"view":{"id":"1031"}},"id":"1030","type":"GlyphRenderer"},{"attributes":{},"id":"1009","type":"LinearScale"},{"attributes":{"fill_color":{"value":"red"},"height":{"units":"data","value":4},"line_width":{"value":2},"width":{"units":"data","value":3},"x":{"value":50},"y":{"value":65}},"id":"1033","type":"Rect"},{"attributes":{},"id":"1135","type":"BasicTickFormatter"},{"attributes":{"cx":{"value":50},"cy":{"value":2},"line_color":{"value":"lightgreen"},"line_width":{"value":4},"x0":{"value":33},"x1":{"value":67},"y0":{"value":15},"y1":{"value":15}},"id":"1028","type":"Quadratic"},{"attributes":{"data":{},"selected":{"id":"1164"},"selection_policy":{"id":"1165"}},"id":"1034","type":"ColumnDataSource"},{"attributes":{"children":[{"id":"1064"},{"id":"1056"},{"id":"1066"},{"id":"1067"},{"id":"1071"},{"id":"1068"},{"id":"1069"},{"id":"1070"},{"id":"1057"},{"id":"1058"},{"id":"1059"},{"id":"1060"},{"id":"1061"},{"id":"1065"}],"max_width":600,"sizing_mode":"stretch_width"},"id":"1118","type":"Row"},{"attributes":{"cx":{"value":50},"cy":{"value":2},"line_alpha":{"value":0.1},"line_color":{"value":"lightgreen"},"line_width":{"value":4},"x0":{"value":33},"x1":{"value":67},"y0":{"value":15},"y1":{"value":15}},"id":"1029","type":"Quadratic"},{"attributes":{"children":[{"id":"1072"},{"id":"1081"},{"id":"1074"}],"max_width":400,"sizing_mode":"stretch_width"},"id":"1119","type":"Row"},{"attributes":{"end":90},"id":"1007","type":"Range1d"},{"attributes":{"source":{"id":"1027"}},"id":"1031","type":"CDSView"},{"attributes":{"data_source":{"id":"1034"},"glyph":{"id":"1032"},"hover_glyph":null,"muted_glyph":null,"view":{"id":"1036"}},"id":"1035","type":"GlyphRenderer"},{"attributes":{},"id":"1161","type":"UnionRenderers"},{"attributes":{"children":[{"id":"1082"}],"max_width":400,"sizing_mode":"stretch_width"},"id":"1120","type":"Row"},{"attributes":{"data":{},"selected":{"id":"1166"},"selection_policy":{"id":"1167"}},"id":"1037","type":"ColumnDataSource"},{"attributes":{},"id":"1163","type":"UnionRenderers"},{"attributes":{"source":{"id":"1034"}},"id":"1036","type":"CDSView"},{"attributes":{"fill_color":{"value":"whitesmoke"},"line_width":{"value":2},"size":{"units":"screen","value":17},"x":{"value":50},"y":{"value":13}},"id":"1040","type":"Circle"},{"attributes":{},"id":"1165","type":"UnionRenderers"},{"attributes":{"formatter":{"id":"1133"},"ticker":{"id":"1014"},"visible":false},"id":"1013","type":"LinearAxis"},{"attributes":{},"id":"1162","type":"Selection"},{"attributes":{"children":[{"id":"1077"}],"max_width":400,"sizing_mode":"stretch_width"},"id":"1124","type":"Row"},{"attributes":{"data_source":{"id":"1037"},"glyph":{"id":"1033"},"hover_glyph":null,"muted_glyph":null,"view":{"id":"1039"}},"id":"1038","type":"GlyphRenderer"},{"attributes":{},"id":"1137","type":"UnionRenderers"},{"attributes":{"children":[{"id":"1076"}],"max_width":400,"sizing_mode":"stretch_width"},"id":"1123","type":"Row"},{"attributes":{},"id":"1164","type":"Selection"},{"attributes":{"text":"Not Set","visible":false},"id":"1063","type":"Div"},{"attributes":{"sizing_mode":"stretch_width","text":"0","visible":false},"id":"1057","type":"Div"},{"attributes":{"sizing_mode":"stretch_width","text":"0","visible":false},"id":"1056","type":"Div"},{"attributes":{"end":1,"format":"0[.]00","js_property_callbacks":{"change:value":[{"id":"1112"}]},"sizing_mode":"stretch_width","start":0,"step":0.01,"title":"LR Aim Weight","value":0.16666666666666666,"visible":false},"id":"1077","type":"Slider"},{"attributes":{"source":{"id":"1037"}},"id":"1039","type":"CDSView"},{"attributes":{"data":{},"selected":{"id":"1168"},"selection_policy":{"id":"1169"}},"id":"1041","type":"ColumnDataSource"},{"attributes":{},"id":"1166","type":"Selection"},{"attributes":{"text":"50","visible":false},"id":"1062","type":"Div"},{"attributes":{},"id":"1138","type":"StringEditor"},{"attributes":{},"id":"1167","type":"UnionRenderers"},{"attributes":{"children":[{"id":"1075"}],"max_width":400,"sizing_mode":"stretch_width"},"id":"1122","type":"Row"}],"root_ids":["1180"]},"title":"Bokeh Application","version":"2.2.3"}}
        </script>
        <script type="text/javascript">
          (function() {
            var fn = function() {
              Bokeh.safely(function() {
                (function(root) {
                  function embed_document(root) {
                    
                  var docs_json = document.getElementById('1766').textContent;
                  var render_items = [{"docid":"fa4dfdf7-9abf-470e-b11d-ce3fbe41668d","root_ids":["1180"],"roots":{"1180":"962c0977-fb2e-4803-a186-3876bc0de561"}}];
                  root.Bokeh.embed.embed_items(docs_json, render_items);
                
                  }
                  if (root.Bokeh !== undefined) {
                    embed_document(root);
                  } else {
                    var attempts = 0;
                    var timer = setInterval(function(root) {
                      if (root.Bokeh !== undefined) {
                        clearInterval(timer);
                        embed_document(root);
                      } else {
                        attempts++;
                        if (attempts > 100) {
                          clearInterval(timer);
                          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                        }
                      }
                    }, 10, root)
                  }
                })(window);
              });
            };
            if (document.readyState != "loading") fn();
            else document.addEventListener("DOMContentLoaded", fn);
          })();
        </script>
    
  </body>
  
</html>